var VORLON;
(function (VORLON) {
    var Production = (function () {
        function Production(vorlonServerUrl, vorlonSessionId, useLocalStorage) {
            this.vorlonServerUrl = vorlonServerUrl;
            this.vorlonSessionId = vorlonSessionId;
            this.useLocalStorage = useLocalStorage;
            var storage = useLocalStorage ? localStorage : sessionStorage;
            var mustActivate = storage["vorlonActivation"] === "true";
            if (this.vorlonServerUrl && this.vorlonServerUrl[this.vorlonServerUrl.length - 1] !== '/') {
                this.vorlonServerUrl = this.vorlonServerUrl + "/";
            }
            if (mustActivate) {
                this.addVorlonScript();
            }
        }
        Production.prototype.addVorlonScript = function () {
            var storage = this.useLocalStorage ? localStorage : sessionStorage;
            storage["vorlonActivation"] = "true";
            this.isActivated = true;
            var scriptElt = document.createElement("SCRIPT");
            scriptElt.src = this.vorlonServerUrl + "vorlon.js" + (this.vorlonSessionId ? "/" + this.vorlonSessionId : "");
            document.head.insertBefore(scriptElt, document.head.firstChild);
        };
        Production.prototype.setIdentity = function (identity) {
            var storage = this.useLocalStorage ? localStorage : sessionStorage;
            storage["vorlonClientIdentity"] = identity;
            var v = VORLON;
            if (v && v.Core) {
                v.Core.sendHelo();
            }
        };
        Production.prototype.getIdentity = function () {
            var storage = this.useLocalStorage ? localStorage : sessionStorage;
            return storage["vorlonClientIdentity"];
        };
        Production.prototype.activate = function (reload) {
            if (this.isActivated)
                return;
            if (reload) {
                var storage = this.useLocalStorage ? localStorage : sessionStorage;
                storage["vorlonActivation"] = "true";
                this.isActivated = true;
                window.location.reload();
            }
            else {
                this.addVorlonScript();
            }
        };
        Production.prototype.deactivate = function (reload) {
            var storage = this.useLocalStorage ? localStorage : sessionStorage;
            storage["vorlonActivation"] = "false";
            this.isActivated = false;
            if (reload) {
                window.location.reload();
            }
        };
        return Production;
    })();
    VORLON.Production = Production;
})(VORLON || (VORLON = {}));

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIlNlcnZlci9wdWJsaWMvdm9ybG9uLnByb2R1Y3Rpb24udHMiXSwibmFtZXMiOlsiVk9STE9OIiwiVk9STE9OLlByb2R1Y3Rpb24iLCJWT1JMT04uUHJvZHVjdGlvbi5jb25zdHJ1Y3RvciIsIlZPUkxPTi5Qcm9kdWN0aW9uLmFkZFZvcmxvblNjcmlwdCIsIlZPUkxPTi5Qcm9kdWN0aW9uLnNldElkZW50aXR5IiwiVk9STE9OLlByb2R1Y3Rpb24uZ2V0SWRlbnRpdHkiLCJWT1JMT04uUHJvZHVjdGlvbi5hY3RpdmF0ZSIsIlZPUkxPTi5Qcm9kdWN0aW9uLmRlYWN0aXZhdGUiXSwibWFwcGluZ3MiOiJBQUFBLElBQU8sTUFBTSxDQWdFWjtBQWhFRCxXQUFPLE1BQU0sRUFBQyxDQUFDO0lBQ2RBO1FBR0NDLG9CQUFtQkEsZUFBdUJBLEVBQVNBLGVBQXdCQSxFQUFTQSxlQUF5QkE7WUFBMUZDLG9CQUFlQSxHQUFmQSxlQUFlQSxDQUFRQTtZQUFTQSxvQkFBZUEsR0FBZkEsZUFBZUEsQ0FBU0E7WUFBU0Esb0JBQWVBLEdBQWZBLGVBQWVBLENBQVVBO1lBQzVHQSxJQUFJQSxPQUFPQSxHQUFHQSxlQUFlQSxHQUFHQSxZQUFZQSxHQUFHQSxjQUFjQSxDQUFDQTtZQUM5REEsSUFBSUEsWUFBWUEsR0FBR0EsT0FBT0EsQ0FBQ0Esa0JBQWtCQSxDQUFDQSxLQUFLQSxNQUFNQSxDQUFDQTtZQUUxREEsRUFBRUEsQ0FBQ0EsQ0FBQ0EsSUFBSUEsQ0FBQ0EsZUFBZUEsSUFBSUEsSUFBSUEsQ0FBQ0EsZUFBZUEsQ0FBQ0EsSUFBSUEsQ0FBQ0EsZUFBZUEsQ0FBQ0EsTUFBTUEsR0FBQ0EsQ0FBQ0EsQ0FBQ0EsS0FBS0EsR0FBR0EsQ0FBQ0EsQ0FBQUEsQ0FBQ0E7Z0JBQ3hGQSxJQUFJQSxDQUFDQSxlQUFlQSxHQUFHQSxJQUFJQSxDQUFDQSxlQUFlQSxHQUFHQSxHQUFHQSxDQUFDQTtZQUNuREEsQ0FBQ0E7WUFFREEsRUFBRUEsQ0FBQ0EsQ0FBQ0EsWUFBWUEsQ0FBQ0EsQ0FBQUEsQ0FBQ0E7Z0JBQ2pCQSxJQUFJQSxDQUFDQSxlQUFlQSxFQUFFQSxDQUFDQTtZQUN4QkEsQ0FBQ0E7UUFDRkEsQ0FBQ0E7UUFFREQsb0NBQWVBLEdBQWZBO1lBQ0NFLElBQUlBLE9BQU9BLEdBQUdBLElBQUlBLENBQUNBLGVBQWVBLEdBQUdBLFlBQVlBLEdBQUdBLGNBQWNBLENBQUNBO1lBQ25FQSxPQUFPQSxDQUFDQSxrQkFBa0JBLENBQUNBLEdBQUdBLE1BQU1BLENBQUNBO1lBQ3JDQSxJQUFJQSxDQUFDQSxXQUFXQSxHQUFHQSxJQUFJQSxDQUFDQTtZQUV4QkEsSUFBSUEsU0FBU0EsR0FBc0JBLFFBQVFBLENBQUNBLGFBQWFBLENBQUNBLFFBQVFBLENBQUNBLENBQUNBO1lBQ3BFQSxTQUFTQSxDQUFDQSxHQUFHQSxHQUFHQSxJQUFJQSxDQUFDQSxlQUFlQSxHQUFHQSxXQUFXQSxHQUFHQSxDQUFDQSxJQUFJQSxDQUFDQSxlQUFlQSxHQUFHQSxHQUFHQSxHQUFHQSxJQUFJQSxDQUFDQSxlQUFlQSxHQUFHQSxFQUFFQSxDQUFDQSxDQUFDQTtZQUM5R0EsUUFBUUEsQ0FBQ0EsSUFBSUEsQ0FBQ0EsWUFBWUEsQ0FBQ0EsU0FBU0EsRUFBRUEsUUFBUUEsQ0FBQ0EsSUFBSUEsQ0FBQ0EsVUFBVUEsQ0FBQ0EsQ0FBQ0E7UUFDakVBLENBQUNBO1FBRURGLGdDQUFXQSxHQUFYQSxVQUFZQSxRQUFRQTtZQUNuQkcsSUFBSUEsT0FBT0EsR0FBR0EsSUFBSUEsQ0FBQ0EsZUFBZUEsR0FBR0EsWUFBWUEsR0FBR0EsY0FBY0EsQ0FBQ0E7WUFDbkVBLE9BQU9BLENBQUNBLHNCQUFzQkEsQ0FBQ0EsR0FBR0EsUUFBUUEsQ0FBQ0E7WUFDM0NBLElBQUlBLENBQUNBLEdBQVFBLE1BQU1BLENBQUNBO1lBQ3BCQSxFQUFFQSxDQUFDQSxDQUFDQSxDQUFDQSxJQUFJQSxDQUFDQSxDQUFDQSxJQUFJQSxDQUFDQSxDQUFBQSxDQUFDQTtnQkFDaEJBLENBQUNBLENBQUNBLElBQUlBLENBQUNBLFFBQVFBLEVBQUVBLENBQUNBO1lBQ25CQSxDQUFDQTtRQUNGQSxDQUFDQTtRQUVESCxnQ0FBV0EsR0FBWEE7WUFDQ0ksSUFBSUEsT0FBT0EsR0FBR0EsSUFBSUEsQ0FBQ0EsZUFBZUEsR0FBR0EsWUFBWUEsR0FBR0EsY0FBY0EsQ0FBQ0E7WUFDbkVBLE1BQU1BLENBQUNBLE9BQU9BLENBQUNBLHNCQUFzQkEsQ0FBQ0EsQ0FBQ0E7UUFDeENBLENBQUNBO1FBRURKLDZCQUFRQSxHQUFSQSxVQUFTQSxNQUFnQkE7WUFDeEJLLEVBQUVBLENBQUNBLENBQUNBLElBQUlBLENBQUNBLFdBQVdBLENBQUNBO2dCQUNwQkEsTUFBTUEsQ0FBQ0E7WUFFUkEsRUFBRUEsQ0FBQ0EsQ0FBQ0EsTUFBTUEsQ0FBQ0EsQ0FBQUEsQ0FBQ0E7Z0JBQ1hBLElBQUlBLE9BQU9BLEdBQUdBLElBQUlBLENBQUNBLGVBQWVBLEdBQUdBLFlBQVlBLEdBQUdBLGNBQWNBLENBQUNBO2dCQUNuRUEsT0FBT0EsQ0FBQ0Esa0JBQWtCQSxDQUFDQSxHQUFHQSxNQUFNQSxDQUFDQTtnQkFDckNBLElBQUlBLENBQUNBLFdBQVdBLEdBQUdBLElBQUlBLENBQUNBO2dCQUN4QkEsTUFBTUEsQ0FBQ0EsUUFBUUEsQ0FBQ0EsTUFBTUEsRUFBRUEsQ0FBQ0E7WUFDMUJBLENBQUNBO1lBQUFBLElBQUlBLENBQUFBLENBQUNBO2dCQUNMQSxJQUFJQSxDQUFDQSxlQUFlQSxFQUFFQSxDQUFDQTtZQUN4QkEsQ0FBQ0E7UUFDRkEsQ0FBQ0E7UUFFREwsK0JBQVVBLEdBQVZBLFVBQVdBLE1BQWdCQTtZQUMxQk0sSUFBSUEsT0FBT0EsR0FBR0EsSUFBSUEsQ0FBQ0EsZUFBZUEsR0FBR0EsWUFBWUEsR0FBR0EsY0FBY0EsQ0FBQ0E7WUFDbkVBLE9BQU9BLENBQUNBLGtCQUFrQkEsQ0FBQ0EsR0FBR0EsT0FBT0EsQ0FBQ0E7WUFDdENBLElBQUlBLENBQUNBLFdBQVdBLEdBQUdBLEtBQUtBLENBQUNBO1lBQ3pCQSxFQUFFQSxDQUFDQSxDQUFDQSxNQUFNQSxDQUFDQSxDQUFBQSxDQUFDQTtnQkFDWEEsTUFBTUEsQ0FBQ0EsUUFBUUEsQ0FBQ0EsTUFBTUEsRUFBRUEsQ0FBQ0E7WUFDMUJBLENBQUNBO1FBQ0ZBLENBQUNBO1FBQ0ZOLGlCQUFDQTtJQUFEQSxDQTlEQUQsQUE4RENDLElBQUFEO0lBOURZQSxpQkFBVUEsYUE4RHRCQSxDQUFBQTtBQUNGQSxDQUFDQSxFQWhFTSxNQUFNLEtBQU4sTUFBTSxRQWdFWiIsImZpbGUiOiJTZXJ2ZXIvcHVibGljL3Zvcmxvbi5wcm9kdWN0aW9uLmpzIiwic291cmNlUm9vdCI6Ii4uLy4uIn0=